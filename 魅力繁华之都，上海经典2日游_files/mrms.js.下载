var RMS=RMS||function(){"undefined"==typeof window.__bfi&&(window.__bfi=[]);var t=location.protocol+"//cdid.c-ctrip.com/model-poc2/h",e=!1;location.hostname.indexOf(".trip.com")>0&&(t="https://riskpoc.trip.com/h");var i=location.protocol+"//"+location.host,r="";var o=function(){var t,e=window,i=(e.XMLHttpRequest&&"withCredentials"in new e.XMLHttpRequest?t=e.XMLHttpRequest:e.XDomainRequest&&(t=e.XDomainRequest),t),r=["head","get","post","put","delete"],o={};function n(t){this.init(t)}n.prototype.init=function(t){this.xhr=new i,this.method=t.method,this.url=t.url,this.success=t.success,this.error=t.error;try{this.xhr.timeout=2e3,this.xhr.ontimeout=function(t){},!0===t.credentials&&(this.xhr.withCredentials=!0)}catch(r){}var e=t.params?t.params:t.data;return this.headers=t.headers,this.send(e),this},n.prototype.send=function(t){var e=this;try{e.success!==undefined&&(e.xhr.onload=function(){e.success.call(this,this.responseText)}),e.error!==undefined&&(e.xhr.error=function(){e.error.call(this,this.responseText)}),e.xhr.open(e.method,e.url,!0),e.headers!==undefined&&e.setHeaders(),t?e.xhr.send(t):e.xhr.send()}catch(i){window.__bfi.push(["_tracklog","194817",JSON.stringify({type:"mrmssend_err",msg:i.message})])}return e},n.prototype.setHeaders=function(){var t,e=this.headers;try{for(t in e)e.hasOwnProperty(t)&&this.xhr.setRequestHeader(t,e[t])}catch(i){}return this};for(var c=0;c<r.length;c++)!function(){var t=r[c];o[t]=function(e,i){var r={};if(e===undefined)throw new Error("CORS: url must be defined");return"object"==typeof e?r=e:("function"==typeof i&&(r.success=i),r.url=e),r.method=t.toUpperCase(),new n(r).xhr}}();return o}(),n=function(t,r,c,s){if(e)return setTimeout(function(){n(t,r,c)},30);if(e=!0,!(document.documentMode&&document.documentMode&&document.documentMode<10)){var a=r+"="+c+"&serverName="+i;o.post({url:t,credentials:!0,params:a,method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},success:function(t){e=!1,t?s&&s(t,!0):s&&s(t,!1)},error:function(){e=!1,s&&s(data,!1)}})}};var c=!1;return{init:function(t){if(!c){c=!0,t=t||{};new Date;var e=this;!function(){try{window.__isBridgeLoaded&&window.CtripUtil&&CtripUtil.app_init_member_H5_info(function(t){t&&(r=t.clientID)})}catch(t){}}(),window.__bfi=window.__bfi||[],window.__bfi.push(["_getFP",function(t){e.fp=t},!1]),window.__bfi.push(["_getStatus",function(t){e.vid=t.vid},!1]),window.__bfi.push(["_getPageid",function(i,r){!i&&r&&(t.pageId||(t.pageId=r+"")),e.pageId=r}]);if(window&&window.location){var i=/^https?:\/\/((global\.secure\.ctrip\.com)|([0-9a-zA-Z\.]*ctripcorp\.)|(secure\.ctrip\.com\.hk)|(m\.ctrip\.com)|(secure\.ctrip\.com)|(secure\.trip\.com)|(secure\.ctrip\.sg)|(secure\.ctrip\.my)|(secure\.ctrip\.co\.kr)|(pay\.ctrip\.com)|(m\.thetrainpal\.com)|(m\.trip\.com)|(m\.mytrainpal\.com)|(cl\.trip\.com)|(hk\.trip\.com)|(nz\.trip\.com)|(ru\.trip\.com)|(co\.trip\.com)|(id\.trip\.com)|(ae\.trip\.com)|(de\.trip\.com)|(au\.trip\.com)|(my\.trip\.com)|(ca\.trip\.com)|(www\.trip\.com)|(pe\.trip\.com)|(kr\.trip\.com)|(ve\.trip\.com)|(ar\.trip\.com)|(tr\.trip\.com)|(mx\.trip\.com)|(br\.trip\.com)|(vn\.trip\.com)|(il\.trip\.com)|(sg\.trip\.com)|(es\.trip\.com)|(za\.trip\.com)|(ph\.trip\.com)|(ch\.trip\.com)|(ie\.trip\.com)|(in\.trip\.com)|(th\.trip\.com)|(it\.trip\.com)|(gr\.trip\.com)|(cz\.trip\.com)|(fr\.trip\.com)|(pl\.trip\.com)|(se\.trip\.com)|(sa\.trip\.com)|(pt\.trip\.com)|(uk\.trip\.com)|(at\.trip\.com)|(jp\.trip\.com)|(nl\.trip\.com)|(big5\.trip\.com)|(tc\.trip\.com)|(us\.trip\.com)|(be\.trip\.com)|(ct\.ctrip\.com)|(m\.wingontravel\.com)|(m\.tujia\.com)|(pay\.qunar\.com)|(bindcardcert\.beta\.qunar\.com))/.exec(window.location);i&&i.length>1&&(setTimeout(function(){var t=document.createElement("script");t.type="text/javascript",t.id="rmsd__script",t.async=!0,t.src=("https:"==document.location.protocol?"https:":"http:")+"//webresource.c-ctrip.com/resaresonline/risk/ubtrms/md.min.c8353394.js",t.crossOrigin="anonymous";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)},10),window.rmsd__startScriptLoad=1*new Date)}!function(){var t=window.__rmsbfi||[],e=t.push=function(){for(var t=arguments,e=0,i=t.length,r=0;r<i;r++)try{if("function"==typeof t[r])t[r]();else if("[object Array]"===Object.prototype.toString.call(t[r])){if(2!=t[r].length)continue;var o=t[r][0],n=t[r][1];"string"==typeof o&&"_getRmsToken"===o&&"function"==typeof n&&n(RMS.getRmsToken())}}catch(c){e++}return e};for(window.__rmsbfi=t;t.length>0;)e(t.shift())}()}},getRmsToken:function(){var t,e,i="";try{window.__bfi.push(["_devTrace","215859",{vid:this.vid,msg:"firstdata"}]);var o=navigator.userAgent.length>300?navigator.userAgent.substring(0,300):navigator.userAgent;i="fp="+(this.fp?this.fp:""),i+="&vid="+(this.vid?this.vid:""),i+="&pageId="+(this.pageId?this.pageId:"");var n=/\_RGUID=([a-z0-9\-]+)(;|$)/.exec(document.cookie),c=/guid\_\_=([a-z0-9\-]+)(;|$)/.exec(document.cookie);if(n&&n.length>1)i+="&r="+n[1].replace(/\-/g,"");else if(c&&c.length>1){i+="&r="+c[1].replace(/\-/g,"")}else i+="&r="+window.CHLOROFP_STATUS;var s=window.CHLOROFP_IP;if(!s){var a=/\_RF1=([0-9\.]+)(;|$)/.exec(document.cookie);a&&a.length>1&&(s=a[1])}isNaN(Number(s))||(t=Number(s),(e=new Array)[0]=t>>>24>>>0,e[1]=t<<8>>>24>>>0,e[2]=t<<16>>>24,e[3]=t<<24>>>24,s=String(e[0])+"."+String(e[1])+"."+String(e[2])+"."+String(e[3])),s&&(s=s.replace(/^\s+|\s+$/g,"")),i+="&ip="+s,i+="&rg="+window.RG_STA,i+="&screen="+screen.width+"x"+screen.height;var p=(new Date).getTimezoneOffset()/60;i+="&tz="+(p<0?"+":"-")+Math.abs(p),i+="&blang="+navigator.language||navigator.userLanguage,i+="&oslang="+navigator.language||navigator.systemLanguage,i+="&ua="+encodeURIComponent(o),i+="&v=m17";var d=!1;return window.__isBridgeLoaded&&window.CtripUtil&&(d=!0),i+="&bl="+d,i+="&clientid="+r,window.__bfi.push(["_devTrace","215859",{vid:this.vid,clientid:r,rmstoken:i}]),i}catch(m){return window.__bfi.push(["_devTrace","243111",{type:"getRmsTokenErr",msg:m.message}]),i}},ping:function(e){if(window&&window.location){if(!e){var i=/\_RGUID=([a-z0-9\-]+)(;|$)/.exec(document.cookie),r=/guid\_\_=([a-z0-9\-]+)(;|$)/.exec(document.cookie);i&&i.length>1?e=i[1].replace(/\-/g,""):r&&r.length>1&&(e=r[1].replace(/\-/g,""))}e&&(e=e+"_"+(o=1,c=100,Math.floor(Math.random()*(c-o+1))+o),window.RG_STA="b4",n(t,"requestId",e,function(t,e){e?(window.CHLOROFP_IP=window.CHLOROFP_IP||t,window.RG_STA="fin"):window.RG_STA="err"}))}var o,c}}}();RMS.init(),RMS.ping();